!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(p){"use strict";var t=window.Select;(t=function(e,t){this.defaults={activeClass:"item-active",disabledClass:"select-disabled",itemDisabledClass:"item-disabled",openClass:"select-open",gutter:2,placeholder:"请选择"},this.trigger=p(e),this.opts=p.extend({},this.defaults,t),this.init()}).prototype={constructor:t,init:function(){var s=this,e=this.trigger;p.each(e,function(e,t){p(t).attr("data-select",e),s.setActive(t,p(t).find("select"),0)}),s.bindEvents()},bindEvents:function(){var n=this;n.trigger.on("click",function(e){e.stopPropagation();var t=p(this),s=t.find("select"),i=n.getData(s);n.trigger.not(this).removeClass(n.opts.openClass),t.hasClass(n.opts.disabledClass)||t.hasClass(n.opts.openClass)?n.destroy():(n.render(t,i),t.addClass(n.opts.openClass))}),n.trigger.find("select").on("change",function(e,t){n.setActive(p(this).parent(),this,t)}),p(document).on("click",".select-option-item",function(){var e=p(this).index(),t=p(this).parents(".select-wrapper").attr("data-select");n.trigger.filter('[data-select="'+t+'"]').find("select").trigger("change",e)}),p(document).click(function(){n.destroy()})},getData:function(e){for(var t=[],s=!1,i=e.find("option"),n=0;n<i.length;n++)s=e.get(0).selectedIndex===n,t.push({name:p(i[n]).text(),value:p(i[n]).val(),disabled:void 0!==p(i[n]).attr("disabled"),active:s});return t},setActive:function(e,t,s){var i=parseInt(s),n=p(t).find("option");0<n.length?((i>=n.length||i<0)&&(i=0),p(t).get(0).selectedIndex=i,p(e).find(".select-inner").text(p(n[i]).text())):p(e).find(".select-inner").text(this.opts.placeholder)},render:function(e,t){var s=this,i=e,n="",a=t;n+='<div class="select-wrapper" data-select="'+i.attr("data-select")+'"><div class="select-content"><ul class="select-options">';for(var l=0;l<a.length;l++)a[l].disabled?n+='<li class="select-option-item '+s.opts.itemDisabledClass+'" data-value="'+a[l].value+'">'+a[l].name+"</li>":a[l].active?n+='<li class="select-option-item '+s.opts.activeClass+'" data-value="'+a[l].value+'">'+a[l].name+"</li>":n+='<li class="select-option-item" data-value="'+a[l].value+'">'+a[l].name+"</li>";n+="</ul></div></div>",p(".select-wrapper").remove(),p("body").append(n);var o=i.outerWidth(!0),r=i.outerHeight(!0),c=i.offset().left,d=i.offset().top;p(".select-wrapper").css({width:o+"px",top:d+r+s.opts.gutter+"px",left:c+"px"})},destroy:function(){this.trigger.removeClass(this.opts.openClass),p(".select-wrapper").remove()}},p.fn.select=function(e){return new t(this,e)},p.fn.select.Constructor=t});
